{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/dashboard/videos/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\nexport default function VideosPage() {\n  const [videos, setVideos] = useState<{ filename: string; url: string }[]>([])\n  const [selectedVideo, setSelectedVideo] = useState<string>('')\n  const [error, setError] = useState('')\n  const [likes, setLikes] = useState<{ [key: string]: number }>({})\n  const [comments, setComments] = useState<{ [key: string]: string[] }>({})\n  const [newComment, setNewComment] = useState<{ [key: string]: string }>({})\n\n  useEffect(() => {\n    fetchVideos()\n  }, [])\n\n  async function fetchVideos() {\n    try {\n      const res = await fetch('/api/videos')\n      if (!res.ok) {\n        throw new Error('Failed to fetch videos')\n      }\n      const data = await res.json()\n      setVideos(data)\n      if (data.length > 0) {\n        setSelectedVideo(data[0].filename)\n      }\n    } catch (err) {\n      setError('Error fetching videos')\n    }\n  }\n\n  async function handleDelete(videoFilename: string) {\n    if (!confirm('Are you sure you want to delete this video?')) {\n      return\n    }\n    try {\n      const res = await fetch(`/api/videos/delete?filename=${encodeURIComponent(videoFilename)}`, {\n        method: 'DELETE',\n      })\n      if (!res.ok) {\n        throw new Error('Failed to delete video')\n      }\n      await fetchVideos()\n      if (selectedVideo === videoFilename) {\n        setSelectedVideo('')\n      }\n    } catch (err) {\n      alert('Error deleting video')\n    }\n  }\n\n  function handleLike(videoFilename: string) {\n    setLikes((prevLikes) => ({\n      ...prevLikes,\n      [videoFilename]: (prevLikes[videoFilename] || 0) + 1,\n    }))\n  }\n\n  function handleCommentChange(videoFilename: string, value: string) {\n    setNewComment((prev) => ({\n      ...prev,\n      [videoFilename]: value,\n    }))\n  }\n\n  function handleAddComment(videoFilename: string) {\n    const comment = newComment[videoFilename]\n    if (!comment) return\n\n    setComments((prevComments) => ({\n      ...prevComments,\n      [videoFilename]: [...(prevComments[videoFilename] || []), comment],\n    }))\n\n    setNewComment((prev) => ({\n      ...prev,\n      [videoFilename]: '',\n    }))\n  }\n\n  function handleShare(videoFilename: string) {\n    const url = `${window.location.origin}/uploads/videos/${videoFilename}`\n    navigator.clipboard.writeText(url)\n    alert('Video URL copied to clipboard!')\n  }\n\n  function handleDownload(videoFilename: string) {\n    const link = document.createElement('a')\n    link.href = `/uploads/videos/${videoFilename}`\n    link.download = videoFilename\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n  }\n\n  return (\n    <div className=\"min-h-screen p-6 max-w-5xl mx-auto bg-white rounded-lg shadow-md flex flex-col\">\n      <h1 className=\"text-4xl font-extrabold mb-6 text-black\">Videos</h1>\n\n      {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n\n      <div className=\"flex flex-col md:flex-row gap-6\">\n        <div className=\"flex-1\">\n          {selectedVideo ? (\n            <>\n              <video\n                key={selectedVideo}\n                src={`/uploads/videos/${selectedVideo}`}\n                controls\n                autoPlay\n                onEnded={() => {\n                  const currentIndex = videos.findIndex((v) => v.filename === selectedVideo)\n                  if (currentIndex !== -1) {\n                    const nextIndex = (currentIndex + 1) % videos.length\n                    setSelectedVideo(videos[nextIndex].filename)\n                  }\n                }}\n                className=\"w-full rounded-lg shadow-md\"\n              />\n              <div className=\"mt-4 flex flex-col gap-4\">\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={() => handleLike(selectedVideo)}\n                    className=\"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition\"\n                    aria-label=\"Like video\"\n                  >\n                    Like ({likes[selectedVideo] || 0})\n                  </button>\n                  <button\n                    onClick={() => handleShare(selectedVideo)}\n                    className=\"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition\"\n                    aria-label=\"Share video\"\n                  >\n                    Share\n                  </button>\n                  <button\n                    onClick={() => handleDownload(selectedVideo)}\n                    className=\"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition\"\n                    aria-label=\"Download video\"\n                  >\n                    Download\n                  </button>\n                  <button\n                    onClick={() => handleDelete(selectedVideo)}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition\"\n                    aria-label=\"Delete video\"\n                  >\n                    Delete\n                  </button>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold mb-2 text-black\">Comments</h3>\n                  <ul className=\"mb-2 max-h-40 overflow-y-auto border border-gray-300 rounded p-2\">\n                    {(comments[selectedVideo] || []).map((comment, index) => (\n                      <li key={index} className=\"text-gray-800 mb-1\">\n                        {comment}\n                      </li>\n                    ))}\n                  </ul>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Add a comment\"\n                    value={newComment[selectedVideo] || ''}\n                    onChange={(e) => handleCommentChange(selectedVideo, e.target.value)}\n                    className=\"w-full p-2 border border-gray-300 rounded mb-2\"\n                  />\n                  <button\n                    onClick={() => handleAddComment(selectedVideo)}\n                    className=\"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition\"\n                  >\n                    Add Comment\n                  </button>\n                </div>\n              </div>\n            </>\n          ) : (\n            <p className=\"text-gray-600\">No video selected</p>\n          )}\n        </div>\n\n        <div className=\"w-full md:w-1/3 overflow-y-auto max-h-[400px] border border-gray-300 rounded p-4 flex flex-col gap-6\">\n          <div>\n            <h2 className=\"text-2xl font-semibold mb-4 text-black\">Uploaded Videos</h2>\n            {videos.length === 0 && <p className=\"text-gray-600\">No videos uploaded yet.</p>}\n            <ul className=\"space-y-3 max-h-60 overflow-y-auto\">\n              {videos.map((video) => (\n                <li key={video.filename}>\n                  <button\n                    onClick={() => setSelectedVideo(video.filename)}\n                    className={`w-full text-left text-black hover:text-gray-700 transition ${\n                      selectedVideo === video.filename ? 'font-bold underline' : ''\n                    }`}\n                  >\n                    {video.filename}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}