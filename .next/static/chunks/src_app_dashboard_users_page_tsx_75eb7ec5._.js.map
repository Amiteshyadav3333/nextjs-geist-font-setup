{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/dashboard/users/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\nexport default function UserProfilePage() {\n  const [user, setUser] = useState<{ name: string; avatar?: string }>({ name: '', avatar: '' })\n  const [name, setName] = useState('')\n  const [avatar, setAvatar] = useState('')\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [previewUrl, setPreviewUrl] = useState<string>('')\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    fetchUserProfile()\n  }, [])\n\n  useEffect(() => {\n    if (!selectedFile) {\n      setPreviewUrl('')\n      return\n    }\n    const objectUrl = URL.createObjectURL(selectedFile)\n    setPreviewUrl(objectUrl)\n\n    return () => URL.revokeObjectURL(objectUrl)\n  }, [selectedFile])\n\n  async function fetchUserProfile() {\n    try {\n      const res = await fetch('/api/users')\n      if (!res.ok) {\n        throw new Error('Failed to fetch user profile')\n      }\n      const data = await res.json()\n      setUser(data)\n      setName(data.name)\n      setAvatar(data.avatar || '')\n    } catch (err) {\n      setError('Error fetching user profile')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleSave() {\n    setError('')\n    setSaving(true)\n    try {\n      // For demonstration, convert selected file to base64 and send along with name and avatar URL\n      let base64Image = ''\n      if (selectedFile) {\n        base64Image = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader()\n          reader.readAsDataURL(selectedFile)\n          reader.onload = () => resolve(reader.result as string)\n          reader.onerror = (error) => reject(error)\n        })\n      }\n\n      const res = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, avatar, profilePhoto: base64Image }),\n      })\n      if (!res.ok) {\n        throw new Error('Failed to save user profile')\n      }\n      const data = await res.json()\n      setUser(data)\n      setSelectedFile(null)\n      setPreviewUrl('')\n    } catch (err) {\n      setError('Error saving user profile')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-white\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-4 border-black\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen p-8 max-w-md mx-auto bg-white rounded-xl shadow-lg\">\n      <h1 className=\"text-4xl font-extrabold mb-8 text-black tracking-tight\">User Profile</h1>\n\n      {error && (\n        <p className=\"text-red-600 mb-6 animate-fade-in font-semibold\" role=\"alert\" aria-live=\"assertive\">\n          {error}\n        </p>\n      )}\n\n      <div className=\"mb-8\">\n        <label className=\"block mb-3 font-semibold text-black text-lg\" htmlFor=\"name\">\n          Name\n        </label>\n        <input\n          id=\"name\"\n          type=\"text\"\n          className=\"w-full border border-gray-400 rounded-lg px-5 py-3 focus:outline-none focus:ring-4 focus:ring-black transition-shadow shadow-sm\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          aria-required=\"true\"\n          aria-invalid={error ? 'true' : 'false'}\n        />\n      </div>\n\n      <div className=\"mb-8\">\n        <label className=\"block mb-3 font-semibold text-black text-lg\" htmlFor=\"avatar\">\n          Avatar URL\n        </label>\n        <input\n          id=\"avatar\"\n          type=\"text\"\n          className=\"w-full border border-gray-400 rounded-lg px-5 py-3 focus:outline-none focus:ring-4 focus:ring-black transition-shadow shadow-sm\"\n          value={avatar}\n          onChange={(e) => setAvatar(e.target.value)}\n          aria-required=\"true\"\n          aria-invalid={error ? 'true' : 'false'}\n        />\n      </div>\n\n      <div className=\"mb-8\">\n        <label className=\"block mb-3 font-semibold text-black text-lg\" htmlFor=\"profilePhoto\">\n          Choose Profile Photo\n        </label>\n        <input\n          id=\"profilePhoto\"\n          type=\"file\"\n          accept=\"image/*\"\n          className=\"w-full border border-gray-400 rounded-lg px-5 py-3 focus:outline-none focus:ring-4 focus:ring-black transition-shadow shadow-sm\"\n          onChange={(e) => {\n            if (e.target.files && e.target.files.length > 0) {\n              setSelectedFile(e.target.files[0])\n            }\n          }}\n          aria-required=\"false\"\n        />\n      </div>\n\n      {(previewUrl || avatar) && (\n        <div className=\"mb-8 flex justify-center\">\n          <img\n            src={previewUrl || avatar}\n            alt=\"User Avatar\"\n            className=\"w-32 h-32 rounded-full object-cover border-2 border-black shadow-md\"\n            onError={(e) => {\n              e.currentTarget.src = ''\n            }}\n          />\n        </div>\n      )}\n\n      <button\n        onClick={handleSave}\n        disabled={saving}\n        className=\"bg-black text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-900 disabled:opacity-50 transition-colors shadow-md\"\n        aria-busy={saving}\n      >\n        {saving ? 'Saving...' : 'Save'}\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}