{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\n\nexport default function DashboardPage() {\n  const [isLoading, setIsLoading] = useState(true)\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [phone, setPhone] = useState('')\n  const [otp, setOtp] = useState('')\n  const [step, setStep] = useState<'enterPhone' | 'enterOtp'>('enterPhone')\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n  const router = useRouter()\n\n  useEffect(() => {\n    const token = localStorage.getItem('enjoyable_token')\n    const userData = localStorage.getItem('enjoyable_user')\n\n    if (token && userData) {\n      setIsLoggedIn(true)\n    }\n    setIsLoading(false)\n  }, [])\n\n  async function sendOtp() {\n    setError('')\n    setLoading(true)\n    try {\n      const res = await fetch('/api/auth/send-otp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ phone }),\n      })\n      if (!res.ok) {\n        throw new Error('Failed to send OTP')\n      }\n      setStep('enterOtp')\n    } catch (err) {\n      setError('Failed to send OTP')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function verifyOtp() {\n    setError('')\n    setLoading(true)\n    try {\n      const res = await fetch('/api/auth/verify-otp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ phone, otp }),\n      })\n      if (!res.ok) {\n        throw new Error('Failed to verify OTP')\n      }\n      const data = await res.json()\n      localStorage.setItem('enjoyable_token', data.token || 'dummy-token')\n      localStorage.setItem('enjoyable_user', phone)\n      setIsLoggedIn(true)\n    } catch (err) {\n      setError('Failed to verify OTP')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  function logout() {\n    localStorage.removeItem('enjoyable_token')\n    localStorage.removeItem('enjoyable_user')\n    setIsLoggedIn(false)\n    setPhone('')\n    setOtp('')\n    setStep('enterPhone')\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-black\"></div>\n      </div>\n    )\n  }\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 p-4\">\n        <div className=\"max-w-md w-full bg-white p-8 rounded shadow\">\n          {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n\n          {step === 'enterPhone' && (\n            <>\n              <h1 className=\"text-2xl font-bold mb-6 text-center\">Dashboard Login</h1>\n              <label htmlFor=\"phone\" className=\"block mb-2 font-semibold text-gray-700\">\n                Phone Number\n              </label>\n              <input\n                id=\"phone\"\n                type=\"text\"\n                value={phone}\n                onChange={(e) => setPhone(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded mb-4\"\n                placeholder=\"Enter your phone number\"\n              />\n              <button\n                onClick={sendOtp}\n                disabled={loading || !phone}\n                className=\"w-full bg-black text-white py-2 rounded hover:bg-gray-900 transition\"\n              >\n                {loading ? 'Sending OTP...' : 'Send OTP'}\n              </button>\n            </>\n          )}\n\n          {step === 'enterOtp' && (\n            <>\n              <h1 className=\"text-2xl font-bold mb-6 text-center\">Enter OTP</h1>\n              <label htmlFor=\"otp\" className=\"block mb-2 font-semibold text-gray-700\">\n                OTP\n              </label>\n              <input\n                id=\"otp\"\n                type=\"text\"\n                value={otp}\n                onChange={(e) => setOtp(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 rounded mb-4\"\n                placeholder=\"Enter the OTP\"\n              />\n              <button\n                onClick={verifyOtp}\n                disabled={loading || !otp}\n                className=\"w-full bg-black text-white py-2 rounded hover:bg-gray-900 transition\"\n              >\n                {loading ? 'Verifying...' : 'Verify OTP'}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white text-black flex flex-col\">\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <h1 className=\"text-2xl font-bold\">ENJOYABLE</h1>\n            <button\n              onClick={logout}\n              className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"flex-1 overflow-auto p-6 max-w-7xl mx-auto\">\n        {/* Dashboard content will be rendered here */}\n        <p>Welcome to the dashboard!</p>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}